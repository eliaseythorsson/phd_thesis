# Materials and methods {#methods}

## Data collection and sources {#datasources}

During the study period from Jaunary 1, 2005 to December 31, 2017, data was collected from multiple whole population registries, and from a single hospital registry. 
All data was identifiable to an individual level using national identification numbers, which are issued by the government. Each individual receives one and only one number over the course of their lifetime, and the identification number is permeanently retired at the time of death.
The Icelandic Directorate of Health processed and anonymized all data from the various registries, before releasing it to the study group. 
Anonymization was accomplished by creating a study identifier based on the national identification number, which was then removed from the data.
The mapping key is kept by the Directorate of Health, and is not accessible to the study group.
The study group linked the data from the various registries using the study identifier, and event dates. 

The data underlying this study is observational in nature, and its quality is enhanced by several factors. Not only are all medical records in Iceland stored electronically, but the same software, *Saga*, has been used by all health-care providers and instituitions throughout the study period.
Likewise, the International Classification of Diseases, 10th revision (ICD-10), is the only diagnostic coding system in use in Iceland during the study period.
Furthermore, all medical procedures have been coded with the NOMESCO Classification of Surgical Procedures (NCSP), and drugs classified using the Anatomical-Therapeutic-Chemical (ATC) classification system of the World Health Organization. 

In the following sub-chapters, each registry providing study data is reviewed.
Statistics Iceland provided data on immigration and emigration, demographic indices and salaries.
Diagnostic data was obtained from Landspitali University Hospital's patient registry and the Primary Care Registry of the Directorate of Health. 
Pneumococcal vaccination status was collected from the National Vaccine Registry (NVR) and augmented with information on privately purchased vaccine doses obtained from the National Drug Prescription Registry (NDPR).
Data regarding antimicrobial prescriptions was also extraced from the NDPR.
Finally, reimbursement data for outpatient otolaryngological procedures was obtained from Icelandic Health Insurance. 

### Statistics Iceland {#statisticsiceland}

Statistics Iceland collects and maintains a large array of economical, social and demographic indices and provides aggregate data at www.statice.is.
For each calendar-year 2005-2017, the number of invididuals living in Iceland by postal-code, gender and age in years, was collected from Statistics Iceland.
This data was used for the denominator in incidence calculations in all papers.
The deciles of salary from 2005-2017 were obtained from Statistics Iceland and used to inform a sensitivity analysis on the cost-benefit of PHiD-CV10 (Paper VI).
Costs were adjusted for inflation using National Wage Index of Statistics Iceland. 
In addition to the aggregate data presented above, individual level information on the immigration and emigration of children zero to four years of age was obtained, anonymized and linked to the other study data.  

### Landspitali University Hospital patient registry {#patientregistry}

Landspitali University Hospital is the sole tertiary hospital in Iceland, and encompasses Children's Hospital Iceland -- Iceland's only paediatric hospital. 
It also serves as a primary and secondary hospital for the capital area, providing care for approximately 65% of the Icelandic population.
In 2017, the total number of non-psyciatric curative care hospital beds in Iceland was 732 (www.statice.is)
Of those, 669 (91%) were at Landspitali University Hospital.
The patient registry contains information on all emergency department and outpatient visits, and all hospital admissions to Landspitali University Hospital. 
For the period of January 1, 2005 to December 31, 2017, data was extracted on all unplanned acute-care visits and hospital admissions with ICD-10 discharge diagnoses compatible with respiratory infections (see Table \@ref(tab:table-icd)).


```{r table-icd}
kable(
    x = data.frame(
    stringsAsFactors = FALSE,
    icd = c(
    "A40",
    "A41",
    "A48",
    "A49",
    "B00",
    "B08",
    "B33",
    "B34",
    "B95",
    "B96",
    "G00",
    "H65",
    "H66",
    "H70",
    "H72",
    "H73",
    "J00",
    "J01",
    "J02",
    "J03",
    "J04",
    "J05",
    "J06",
    "J09",
    "J10",
    "J11",
    "J12",
    "J13",
    "J14",
    "J15",
    "J16",
    "J17",
    "J18",
    "J20",
    "J21",
    "J22",
    "J32",
    "J36",
    "J40",
    "J85",
    "J86",
    "J90",
    "N30",
    "N39",
    "R05",
    "R50"
    ),
    Disease = c(
    "Streptococcal sepsis",
    "Other sepsis",
    "Other bacterial diseases, not elsewhere classified",
    "Bacterial infection of unspecified site",
    "Herpesviral [herpes simplex] infections",
    "Other viral infections characterized by skin and mucous membrane lesions, not elsewhere classified",
    "Other viral diseases, not elsewhere classified",
    "Viral infection of unspecified site",
    "Streptococcus, Staphylococcus, and Enterococcus as the cause of diseases classified elsewhere",
    "Other bacterial agents as the cause of diseases classified elsewhere",
    "Bacterial meningitis,not elsewhere classified",
    "Nonsuppurative otitis media",
    "Suppurative and unspecified otitis media",
    "Mastoiditis and related conditions",
    "Perforation of tympanic membrane",
    "Other disorders of tympanic membrane",
    "Acute nasopharyngitis [common cold]",
    "Acute sinusitis",
    "Acute pharyngitis",
    "Acute tonsillitis",
    "Acute laryngitis and tracheitis",
    "Acute obstructive laryngitis [croup] and epiglottitis",
    "Acute upper respiratory infections of multiple and unspecified sites",
    "Influenza due to certain identified influenza viruses",
    "Influenza due to other identified influenza virus",
    "Influenza due to unidentified influenza virus",
    "Viral pneumonia, not elsewhere classified",
    "Pneumonia due to Streptococcus pneumoniae",
    "Pneumonia due to Hemophilus influenzae",
    "Bacterial pneumonia, not elsewhere classified",
    "Pneumonia due to other infectious organisms, not elsewhere classified",
    "Pneumonia in diseases classified elsewhere",
    "Pneumonia, unspecified organism",
    "Acute bronchitis",
    "Acute bronchiolitis",
    "Unspecified acute lower respiratory infection",
    "Chronic sinusitis",
    "Peritonsillar abscess",
    "Bronchitis, not specified as acute or chronic",
    "Abscess of lung and mediastinum",
    "Pyothorax",
    "Pleural effusion, not elsewhere classified",
    "Cystitis",
    "Other disorders of urinary system",
    "Cough",
    "Fever of other and unknown origin"
    )
    ),
    col.names = c("ICD-10 code", "Disease"),
    caption = "The International Classification of Diseases, 10th revision codes used in the current study"
    )
```

Additionally, any visit or hospital admission associated with NCSP procedural codes in Table \@ref(tab:table-ncsp) were extracted the patient registry. 

```{r table-ncsp}
kable(
    x = data.frame(
    stringsAsFactors = FALSE,
    NCSP.code = c(
    "EMSB00",
    "EMSB10",
    "EMSB15",
    "EMSB20",
    "EMSB30",
    "EMSB99",
    "EMSW99",
    "DCSA10",
    "DCSA20",
    "DCSW00"
    ),
    Description = c(
    "Excision of lesion of tonsil or adenoid",
    "Tonsillectomy",
    "Intracapsular destruction of tonsils",
    "Adenotonsillectomy",
    "Adenotomy",
    "Other excision on tonsils and adenoids",
    "Other operation on tonsil or adenoids",
    "Paracentesis of tympanic membrane",
    "Insertion of ventilating tube through tympanic membrane",
    "Removal of ventilating tube from tympanic membrane"
    )
    ),
    col.names = c("NCSP code", "Description"),
    caption = "NOMESCO Classification of Surgical Procedures codes used in the current study"
    
    )
```


The data included the date of visit or hospital admission, date of hospital discharge, hospital length of stay, the departments involved (including the intensive care unit), and a detailed breakdown of costs associated with the visit.
A separate unique identification number was provided for each individual visit or hospital admission. 

Several smaller independent data-sets pertaining to specific papers were extracted from the patient registry.
These data-sets were not linked to the main study data. 

For [paper I](#paper1), describing the impact of PHiD-CV10 on otitis media with treatment failure, all doses of ceftriaxone administered at the Children's Hospital Iceland between January 2009 and December 2015 were extracted from the hospital's medication administration system using the ATC code J01DD04.
Any ICD-10 diagnostic code associated with the visit or hospital admission in which ceftriaxone was administered, was extracted from the patient registry.
Importantly, this included all ICD-10 codes, not only those in Table \@ref(tab:table-icd).
The aggregate number of yearly visits to the paediatric emergency department of Children's Hospital Iceland 2008-2015 was also obtained for use in [paper I](#paper1)

[Paper VI](#paper6) -- a cost-benefit analysis of PHiD-CV10 introduction into the paediatric vaccination program, required synthetic controls used within a time-series analysis framework. 
The aggregate monthly number of acute-care visits and hospital admissions for several sub-chapters of the ICD-10 diagnostic coding system (Table \@ref(tab:table-icd-synthetic))) were obtained for 22 different age-groups. 

```{r table-icd-synthetic}
kable(
    x = data.frame(
    stringsAsFactors = FALSE,
    icd.code = c(
    "A10-B99",
    "C00-D48",
    "D50-89",
    "E00-99",
    "G00-G99",
    "H00-99",
    "I00-99",
    "K00-99",
    "L00-99",
    "M00-99",
    "N00-99",
    "P00-99",
    "Q00-99",
    "R00-99",
    "S00-T99",
    "U00-99",
    "V00-Y99",
    "Z00-99"
    ),
    Description = c(
    "Certain infectious and parasitic diseases",
    "Neoplasms",
    "Diseases of the blood and blood-forming organs and certain disorders involving the immune mechanism",
    "Endocrine, nutritional and metabolic diseases",
    "Diseases of the nervous system",
    "Diseases of the eye and adnexa, Diseases of the ear and mastoid process",
    "Diseases of the circulatory system",
    "Diseases of the digestive system",
    "Diseases of the skin and subcutaneous tissue",
    "Diseases of the musculoskeletal system and connective tissue",
    "Diseases of the genitourinary system",
    "Certain conditions originating in the perinatal period",
    "Congenital malformations, deformations and chromosomal abnormalities",
    "Symptoms, signs and abnormal clinical and laboratory findings, not elsewhere classified",
    "Provisional assignment of new diseases of uncertain etiology",
    "Injury, poisoning and certain other consequences of external causes",
    "External causes of morbidity",
    "Factors influencing health status and contact with health services"
    )
    ),
    col.names = c("ICD-10 code", "Description"),
    caption = "NOMESCO Classification of Surgical Procedures codes used in the current study"
    )
    
```


Data from the patient registry was used in [paper I](#paper1), [paper IV](#paper4), [paper V](#paper5) and [paper VI](#paper6).

### The Primary Care Registry {#primarycareregistry}

In the Icelandic healthcare system, primary care is provided by family medicine physicians at 69 neighborhood based centers (*Heilsugæsla*).
All primary care centers use the same electronic medical record system, and the same diagnostic coding systems (NCSP, ICD-10) as Landspitali University Hospital and Children's Hospital Iceland.
The Directorate of Health maintains a registry on all primary care visits within the Icelandic healthcare system.
Due to extensive maintenance and restructuring ongoing since early 2016, no new data has been added to the registry since December 31, 2015.
From this registry, all physician visits and phone-calls with ICD-10 diagnostic codes compatible with respiratory tract infections were extracted for the period January 1, 2005 to December 31, 2015 (Table \@ref(tab:table-icd)).

Data from the Primary Care Registry was used in [paper II](#paper2), [paper III](#paper3), [paper IV](#paper4) and [paper VI](#paper6).

### The National Vaccine Registry {#vaccineregistry}

The Icelandic Directorate of Health also maintains the National Vaccine Registry (NVR). 
All vaccine doses administered within the healthcare system are systematically recorded in an individual's electronic health record at the time of administration.
This record is reviewed and updated regularly, and vaccinations given in other healthcare facilities are included.
The NVR collects this information from all electronic health records in the country.
All administered vaccine doses with ATC codes "J07AL" (Pneumococcal vaccines) were extracted for the period of January 1, 2005 to December 31, 2017.

Data from the NVR are used in all papers. 

### The National Drug Prescription Registry {#prescriptionregistry}

The national drug prescription registry (NDPR) is a whole population registry, collected and maintained by the Icelandic Directorate of Health since January 1, 2005.
It contains information on all filled drug prescriptions in Iceland.
All pharmacies are required by law to collect data on each filled prescription and submit to the NDPR.
An important distinction must be made between a written prescription and a filled prescription.
The NDPR receives information if and when a prescription is filled.
It does not contain information on prescriptions that were never filled by the patient.
All prescriptions contained within the NDPR were paid for and received by the patient.
Extensive validation and error testing has been performed by the Directorate of Health to ensure the robustness of the NDPR.
Automated electronic submissions, coupled with tightly controlled processes by which pharmacies dispense drugs, has essentially excluded the possiblity of any filled prescriptions escaping registration. 

All prescriptions within the ATC therapeutic subgroup "J01" (Antibacterials for Systemic Use), "J07" (Vaccines), "S01" (Opthalmologicals) and "S02" (Otologicals) were extracted for the period from January 1, 2005 to December 31, 2017.
The chemical subgroups used in the study are shown in Table \@ref(tab:table-atc))

```{r table-atc}
kable(
    x = data.frame(
    stringsAsFactors = FALSE,
    ATC.code = c(
    "J01A",
    "J01B",
    "J01C",
    "J01D",
    "J01E",
    "J01F",
    "J01G",
    "J01M",
    "J01R",
    "J01X",
    "J07A",
    "J07B",
    "J07C",
    "J07X",
    "S01A, S02A",
    "S01C, S02C"
    ),
    Description = c(
    "Tetracyclines",
    "Amphenicols",
    "Beta-lactam antibacterials, penicillins",
    "Other beta-lactam antibacterials",
    "Sulfonamides and trimethoprim",
    "Macrolides, lincosamides and streptogramins",
    "Aminoglycoside antibacterials",
    "Quinolone antibacterials",
    "Combinations of antibacterials",
    "Other antibacterials",
    "Bacterial vaccines",
    "Viral vaccines",
    "Bacterial and viral vaccines",
    "Other vaccines",
    "Anti-infectives",
    "Anti-inflammatory agents and anti-infectives in combination"
    )
    ),
    col.names = c("ATC chemical subgroup code", "Description"),
    caption = "Anatomical Therapeutic Chemical codes used in the current study"
    )
```

Data from the NDPR was used in [paper II](#paper2), [paper III](#paper3) and [paper4](#paper4).

### Reimbursement database of Icelandic Health Insurance {#reimbursementdatabase}

The healthcare system in Iceland is a single-payer system with one government-run health insurance provider, under which all permanent citizens are covered. 
Most healthcare visits require a nominal out-of-pocket fee, with the rest of the visit covered by the insurance.
There are exceptions to this -- e.g. visits for children under two years of age are completely covered by the insurance. 
Healthcare providers are either salaried governmental employees, or independent practitioners who are reimbursed on a per case basis, according to pre-determined negotiations with Icelandic Health Insurance.
To receive pay for services, physicians must submit a reimbursement form detailing the nature of the visit and any procedures performed using pre-specified procedural codes.
Icelandic Health Insurance maintains a reimbursement database which details the nature and number of procedures performed.
Data on all otolaryngological procedures performed on the middle ear and tonsils were extracted from the reimbursement database for the period from January 1, 2005 to December 31, 2017 using the procedural codes in Table \@ref(tab:table-reimbursement))

```{r table-reimbursement}
kable(
    x = data.frame(
    stringsAsFactors = FALSE,
    reimbursement.code = c(
    "5500601",
    "5500602/55Q0602+55Z0602",
    "5500603/55Q0603+55Z0603",
    "5500604/55Q0604+55Z0604",
    "5501001/55Q1001+55Z1001",
    "5501002/55Q1002+55Z1002",
    "5501201/55Q1201+55Z1201",
    "5501301/55Q1301+55Z1301",
    "5501801/55Q1801+55Z1801",
    "5501802/55Q1802+55Z1802",
    "5501901/55Q1901+55Z1901",
    "5501902/55Q1902+55Z1902",
    "5502002/55Q2002+55Z2002"
    ),
    Description = c(
    "Myringotomy, one or both ears, under local anesthetic",
    "Placement of tympanostomy, one ear (local anesthetic/general anesthesia)",
    "Placement of tympanostomy tube, one ear, and myringotomy, both ears (local anesthetic/general anesthesia)",
    "Removal of tympanostomy tube, one ear (local anesthetic/general anesthesia)",
    "Placement of tympanostomy tube, both ears (local anesthetic/general anesthesia)",
    "Removal of tympanostomy tube, both ears (local anesthetic/general anesthesia)",
    "Adenoidectomy (local anesthetic/general anesthesia)",
    "Adenoidectomy and placement of tymponstomy tube or myringotomy, one or both ears (local anesthetic/general anesthesia)",
    "Tonsillectomy with or without adenoidectomy (local anesthetic/general anesthesia)",
    "Tonsillectomy with or without adenoidectomy - performed with laser (local anesthetic/general anesthesia)",
    "Tonsillectomy, with or without adenoidectomy, and tympanostomy or myringotomy (local anesthetic/general anesthesia)",
    "Tonsillectomy, with or without adenoidectomy, and tympanostomy or myringotomy - performed with laser (local anesthetic/general anesthesia)",
    "Myringoplasty with patch (local anesthetic/general anesthesia)"
    
    )
    ),
    col.names = c("Reimbursement code", "Description"),
    caption = "Reimbursement codes used in the current study"
    )
```

Data from the reimbursement database was used in [paper IV](#paper4).
